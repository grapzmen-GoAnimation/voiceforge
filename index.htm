<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TTS Website with Headers</title>
<style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    textarea { width: 100%; height: 100px; }
    select, button { margin-top: 10px; padding: 8px; }
</style>
</head>
<body>

<h2>Text-to-Speech Converter</h2>

<label for="voice">Select Voice:</label>
<select id="voice">
    <option value="IVONA 2 Voice Eric22">Eric</option>
</select>

<br><br>

<label for="text">Enter Text:</label>
<textarea id="text" placeholder="Type something to convert to speech..."></textarea>

<br>
<button id="convertBtn">Convert to Speech</button>

<audio id="audioPlayer" controls style="display:none; margin-top:20px;"></audio>

<script>
document.getElementById("convertBtn").addEventListener("click", async () => {
    const voice = encodeURIComponent(document.getElementById("voice").value);
    const text = encodeURIComponent(document.getElementById("text").value.trim());

    if (!text) {
        alert("Please enter some text.");
        return;
    }

    const apiUrl = `https://tts.vampi.tech/api/synthesizeSpeech?text=${text}&voice=${voice}&type=text&rate=0&volume=100&outType=mp3&sampleRate=22050&bitDepth=16&channels=2&events=0&transport=stream`;

    try {
        const response = await fetch(apiUrl, {
            method: "GET",
            headers: {
		    "Referer": "https://tts.vampi.tech",
			"Authorization": "7617b522af9b29275865f6794ed504a0"
            }
        });

        if (!response.ok) {
            throw new Error(`Server error: ${response.status}`);
        }
        const audioBlob = await response.blob();
        const audioUrl = URL.createObjectURL(audioBlob);
        const audioPlayer = document.getElementById("audioPlayer");
        audioPlayer.src = audioUrl;
        audioPlayer.style.display = "block";
        audioPlayer.play();

    } catch (error) {
        console.error("TTS request failed:", error);
        alert("Failed to convert text to speech. Check console for details.");
    }
});
</script>

</body>
</html>
